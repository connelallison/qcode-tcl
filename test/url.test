package require tcltest
eval ::tcltest::configure $argv
# Ensure package is loaded from ./qcode rather than /usr/lib/tcltk
set auto_path [linsert $auto_path 0 ./qcode]
package require qcode
namespace import qc::*

namespace eval ::qcode::test {

    namespace import ::tcltest::*

    test url_path-1.0 {url_path } -setup {
    } -body {
        url_path "/someplace.html?order_number=911&title=casáu"
    } -cleanup {} -result {/someplace.html}

    test url_path-1.1 {url_path full url} -setup {
    } -body {
        url_path "http://www.domain-name99.co.uk/someplace.html?order_number=911&title=casáu"
    } -cleanup {} -result {/someplace.html}

    test url_path-1.2 {url_path full url port number} -setup {
    } -body {		
        url_path "https://www.domain-name99.co.uk:8443/someplace.html?order_number=911&title=casáu"
    } -cleanup {} -result {/someplace.html}

    cleanupTests
}
namespace delete ::qcode::test
